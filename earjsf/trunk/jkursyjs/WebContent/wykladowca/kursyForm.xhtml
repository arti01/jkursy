<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">
	<ui:composition template="/templates/templatewyklad.xhtml">
		<ui:define name="body">
<h:body>
kursy detale:)
<br/>
nazwa:
<h2><h:outputText value="#{wykladKursyAc.kurs.nazwa}"/></h2>
krótki opis:
<h3><h:outputText value="#{wykladKursyAc.kurs.opisKrotki}"/></h3>
<p>
od:<h:outputText value="#{wykladKursyAc.kurs.dataod}"><f:convertDateTime type="date"/> </h:outputText>
do:<h:outputText value="#{wykladKursyAc.kurs.datado}"><f:convertDateTime type="date"/> </h:outputText>
</p>
<h:form>
	<h:commandButton value="dodaj nową lekcję" action="#{wykladKursyAc.lekcjaFormNew}"/>
</h:form>
<h2><h:outputText value="#{wykladKursyAc.errorText}"  styleClass="error"/></h2>
<ul>
<h:form>
<h:dataTable var="lekcja" value="#{wykladKursyAc.lekcje}">
<h:column>
<f:facet name="header"><h:outputText value="lp"/></f:facet>
	<h:selectOneMenu value="#{lekcja.lp}" onchange="submit();" valueChangeListener="#{wykladKursyAc.zmienLekcjaLp}">
		<f:selectItems value="#{wykladKursyAc.kurs.lekcjeLpAll}"/>
	</h:selectOneMenu>
	<h:commandButton value="usuń lekcję" action="#{wykladKursyAc.lekcjaUsun}">
			<f:setPropertyActionListener target="#{wykladKursyAc.lekcja}" value="#{lekcja}"/>
	</h:commandButton>
</h:column>

<h:column>
<f:facet name="header"><h:outputText value="widoczna"/></f:facet>
<h:outputText value="Tak" rendered="#{lekcja.widoczna}"/>
<h:outputText value="Nie" rendered="#{!lekcja.widoczna}"/>
</h:column>

<h:column>
<f:facet name="header"><h:outputText value="tytuł (data zmiany)"/></f:facet>
	<h:commandLink action="#{wykladKursyAc.lekcjaForm}">
		<h:outputText value="#{lekcja.tytul} (#{lekcja.datazmiany})">
			<f:convertDateTime pattern="yyyy-MM-dd HH:mm"/>
		</h:outputText>
		<f:setPropertyActionListener target="#{wykladKursyAc.lekcja}" value="#{lekcja}"/>
	</h:commandLink>
	</h:column>
	<h:column>
		<h:commandLink value="obsługa zdjęć (ilość: #{lekcja.lekcjafoties.size()})" action="#{wykladKursyAc.foty}">
			<f:setPropertyActionListener target="#{wykladKursyAc.lekcja}" value="#{lekcja}"/>
			<f:setPropertyActionListener target="#{wykladImageUploadBean.upload}" value="false"/>
		</h:commandLink>
	</h:column>
	<h:column>
		<h:commandLink value="obsługa załączników (plików: #{lekcja.lekcjaplikis.size()})" action="#{wykladKursyAc.pliki}">
			<f:setPropertyActionListener target="#{wykladKursyAc.lekcja}" value="#{lekcja}"/>
			<f:setPropertyActionListener target="#{wykladPlikUploadBean.upload}" value="false"/>
		</h:commandLink>
	</h:column>
	<h:column>
		<h:commandLink value="podgląd lekcji" action="#{wykladKursyAc.lekcjaPodglad}">
			<f:setPropertyActionListener target="#{wykladKursyAc.lekcja}" value="#{lekcja}"/>
		</h:commandLink>
	</h:column>
	<h:column>
	<h:panelGrid columns="1">
	<h:commandLink value="zdjęcia kursantów (ilość: #{lekcja.lekcjafotykursant.size()})" action="#{wykladKursyAc.fotyKursantow}">
			<f:setPropertyActionListener target="#{wykladKursyAc.lekcja}" value="#{lekcja}"/>
	</h:commandLink>
	<h:outputText value="ostatnie z: #{lekcja.lastFota.datadodaniaS}"/>
	</h:panelGrid>
	</h:column>
</h:dataTable>
</h:form>
</ul>

<hr/>

<h2>Newsy kursu</h2>
<h:form>
	<h:commandButton value="dodaj nowy news" action="#{wykladNewsyAc.formNew}"/>
</h:form>

<h:form>
<h:dataTable var="news" value="#{wykladKursyAc.wn.allNewsy}">
<h:column>
<f:facet name="header">tytuł</f:facet>
<h:commandLink action="#{wykladKursyAc.wn.form}">
	<h:outputText value="#{news.tytul}"/>
	<f:setPropertyActionListener target="#{wykladKursyAc.wn.news}" value="#{news}"/>
</h:commandLink>
</h:column>
<h:column>
<f:facet name="header">data dodania</f:facet>
<h:outputText value="#{news.datadodania}">
	<f:convertDateTime pattern="yyyy-MM-dd"/>
</h:outputText>
</h:column>
<h:column>
		<h:commandLink value="usuń news" action="#{wykladKursyAc.wn.usun}">
			<f:setPropertyActionListener target="#{wykladKursyAc.wn.news}" value="#{news}"/>
		</h:commandLink>
	</h:column>
</h:dataTable>
</h:form>

</h:body>
</ui:define>
</ui:composition>
</html>