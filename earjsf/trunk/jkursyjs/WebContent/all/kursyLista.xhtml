<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.org/rich" xmlns:a4j="http://richfaces.org/a4j">
<ui:composition template="/templates/template.xhtml">
	<ui:define name="body">
	<body>
		<div id="tabela">
			<h:form id="form1">
				<rich:dataTable value="#{kursyAc.allKursy}" var="kurs" id="tabkursy">
					<rich:column sortBy="#{kurs.nazwa}" id="nazwa" sortOrder="#{adminKursyAc.nazwaOrder}">
						<f:facet name="header">
							<a4j:commandLink value="kurs" render="tabkursy" action="#{adminKursyAc.sortBynazwa}" />
						</f:facet>
						<h:commandLink action="#{kursyAc.detale}">
							<h:outputText value="#{kurs.nazwa}" styleClass="tytul" />
						</h:commandLink>

						<hr />
						<p>
							<h:outputText value="liczebność grupy #{kurs.wielkoscgrupy}" />
							<br />
							<h:outputText value="(wolnych miejsc #{kurs.wolnychMiejsc})" />
						</p>
					</rich:column>

					<rich:column sortBy="#{kurs.stacjonarnyTN}" id="stacjonarny"
						sortOrder="#{adminKursyAc.stacjonarnyTNOrder}">
						<f:facet name="header">
							<a4j:commandLink value="rodzaj" render="tabkursy" action="#{adminKursyAc.sortBystacjonarnyTN}" />
						</f:facet>

						<h:commandLink action="#{kursyAc.detale}">
							<h:outputText value="#{kurs.stacjonarnyTN}" />
						</h:commandLink>

					</rich:column>

					<rich:column sortBy="#{kurs.cena}" id="cena" sortOrder="#{adminKursyAc.cenaOrder}">
						<f:facet name="header">
							<a4j:commandLink value="cena" render="tabkursy" action="#{adminKursyAc.sortBycena}" />
						</f:facet>
						<h:outputText value="#{kurs.cena}">
							<f:convertNumber currencySymbol="zł" groupingUsed="#{true}" maxFractionDigits="2" type="currency" />
						</h:outputText>
					</rich:column>

					<rich:column sortBy="#{kurs.typykursu.nazwa}" id="typykursu" sortOrder="#{adminKursyAc.typykursuOrder}">
						<f:facet name="header">
							<a4j:commandLink value="typ" render="tabkursy" action="#{adminKursyAc.sortBytypykursu}" />
						</f:facet>
						<h:commandLink action="#{indexAc.tk}">
							<f:setPropertyActionListener target="#{indexAc.tk}" value="#{kurs.typykursu}" />
							<h:outputText value="#{kurs.typykursu.nazwa}" />
						</h:commandLink>
					</rich:column>

					<rich:column sortBy="#{kurs.poziomyzaawansowania.nazwa}" id="poziomyzaawansowania"
						sortOrder="#{adminKursyAc.poziomyzaawansowaniaOrder}">
						<f:facet name="header">
							<a4j:commandLink value="poziom" render="tabkursy" action="#{adminKursyAc.sortBypoziomyzaawansowania}" />
						</f:facet>

						<h:commandLink action="#{indexAc.pz}">
							<f:setPropertyActionListener target="#{indexAc.pz}" value="#{kurs.poziomyzaawansowania}" />
							<h:outputText value="#{kurs.poziomyzaawansowania.nazwa}" />
						</h:commandLink>

					</rich:column>

					<rich:column sortBy="#{kurs.dataod}" id="dataod" sortOrder="#{adminKursyAc.dataodOrder}">
						<f:facet name="header">
							<a4j:commandLink value="rozpoczęcie" render="tabkursy" action="#{adminKursyAc.sortBydataod}" />
						</f:facet>
						<h:outputText value="#{kurs.dataod}" rendered="#{kurs.dataod!=null}">
							<f:convertDateTime pattern="dd-MM-yyyy" />
						</h:outputText>
						<br /> do:<br />
						<h:outputText value="#{kurs.datado}" rendered="#{kurs.dataod!=null}">
							<f:convertDateTime pattern="dd-MM-yyyy" />
						</h:outputText>
						<h:outputText value="rozpoczynamy, gdy zbierze się grupa" rendered="#{kurs.dataod==null}" />
					</rich:column>
					<rich:column>
						<f:facet name="header">
							<a4j:commandLink value="rezerwacja" render="tabkursy" />
						</f:facet>
						<h:commandButton value="rezerwuj kurs" action="#{kursantKursyAc.rezerwacja}"
							rendered="#{(login.zalogowany.username!=null)and(kurs.rezerwacjaDostepna)}">
							<f:setPropertyActionListener target="#{kursantKursyAc.kurs}" value="#{kurs}" />
						</h:commandButton>
						<h:outputText value="zaloguj się aby rezerwować" rendered="#{(login.zalogowany.username==null)}" />
					</rich:column>
				</rich:dataTable>
			</h:form>
		</div>
	</body>
	</ui:define>
</ui:composition>
</html>