<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:rich="http://richfaces.org/rich">
    <h:form>
        <table
            style="width: 100%; font-size: 11px; font-family: arial, tahoma;" cellpadding="1" cellspacing="0">
            <tr>
                <td width="100%">
                    <rich:panelMenu itemMode="ajax" groupMode="ajax" groupExpandedLeftIcon="triangleUp"
                                    groupCollapsedLeftIcon="triangleDown" topGroupExpandedRightIcon="chevronUp"
                                    topGroupCollapsedRightIcon="chevronDown" itemLeftIcon="disc">
                        <rich:panelMenuItem>
                            <h:commandLink value="Start" action="#{login.stronaIndex}" style="font-size: 13px; font-weight: bold"/>
                        </rich:panelMenuItem>
                        <rich:panelMenuGroup label="Dokumenty - konfiguracja" rendered="#{login.dcCfg}" expanded="#{login.menuDcCfgExp}" actionListener="#{login.menuDcCfgExpList}">
                            <rich:panelMenuItem>
                                <h:commandLink value="Grupy rodzajów" action="#{RodzajeGrupyCfg.list}" />
                            </rich:panelMenuItem>
                            <rich:panelMenuItem >
                                <h:commandLink value="Rodzaje" action="#{RodzajeCfg.list}"/>
                            </rich:panelMenuItem>
                            <rich:panelMenuItem >
                                <h:commandLink value="Teczki" action="#{TeczkiCfg.list}"/>
                            </rich:panelMenuItem>
                            <rich:panelMenuItem >
                                <h:commandLink value="Żródła" action="#{ZrodlaCfg.list}"/>
                            </rich:panelMenuItem>
                            <rich:panelMenuItem >
                                <h:commandLink value="Symb. Mer. 1" action="#{SymbMer1Cfg.list}"/>
                            </rich:panelMenuItem>
                            <rich:panelMenuItem >
                                <h:commandLink value="Symb. Mer. 2" action="#{SymbMer2Cfg.list}"/>
                            </rich:panelMenuItem>
                            <h:commandLink action="#{KontrahenciCfg.list}">
                                <rich:panelMenuItem >
                                    Kontrahenci
                                </rich:panelMenuItem>
                            </h:commandLink>
                        </rich:panelMenuGroup>

                        <rich:panelMenuGroup label="Dokumenty - rejestracja" rendered="#{login.dcRej}" expanded="#{login.menuDcRejExp}" actionListener="#{login.menuDcRejExpList}">
                            <h:commandLink action="#{RejImpPlik.list}">
                                <rich:panelMenuItem >
                                    Poczekalnia
                                </rich:panelMenuItem>
                            </h:commandLink>
                            <h:commandLink action="#{RejestracjaRej.list}">
                                <rich:panelMenuItem >
                                    Rejestracja
                                </rich:panelMenuItem>
                            </h:commandLink>
                            <h:commandLink action="#{RejestracjaRej.kontrahentList}">
                                <rich:panelMenuItem >
                                    Lista kontrahentów
                                </rich:panelMenuItem>
                            </h:commandLink>
                            <h:commandLink action="#{RaportyRej.raportPocz}">
                                <rich:panelMenuItem >
                                    Raport pocztowy
                                </rich:panelMenuItem>
                            </h:commandLink>
                            <h:commandLink action="#{WyszukajRej.form}">
                                <rich:panelMenuItem >
                                    Wyszukaj
                                </rich:panelMenuItem>
                            </h:commandLink>
                            <h:commandLink action="#{BrakowanieRej.list()}">
                                <rich:panelMenuItem >
                                    Do brakowania
                                </rich:panelMenuItem>
                            </h:commandLink>
                        </rich:panelMenuGroup>

                        <rich:panelMenuGroup label="Dokumenty - odbiór" rendered="#{login.dcOdb}" expanded="#{login.menuDcOdbExp}" actionListener="#{login.menuDcOdbExpList}">
                            <h:commandLink action="#{AkceptOdb.list}">
                                <rich:panelMenuItem >
                                    Do akceptacji
                                </rich:panelMenuItem>
                            </h:commandLink>
                            <h:commandLink action="#{HistOdb.list}">
                                <rich:panelMenuItem >
                                    Historia akceptacji
                                </rich:panelMenuItem>
                            </h:commandLink>
                            <h:commandLink action="#{DoWiadOdb.list}">
                                <rich:panelMenuItem >
                                    Do wiadomości
                                </rich:panelMenuItem>
                            </h:commandLink>
                        </rich:panelMenuGroup>

                        <rich:panelMenuGroup label="Dokumenty - archiwum" rendered="#{login.dcArc}" expanded="#{login.menuDcArcExp}" actionListener="#{login.menuDcArcExpList}">
                            <h:commandLink action="#{PrzeniesArch.list}">
                                <rich:panelMenuItem >
                                    Do archiwum
                                </rich:panelMenuItem>
                            </h:commandLink>
                            <h:commandLink action="#{PoczekalniaArch.list}">
                                <rich:panelMenuItem >
                                    Poczekalnia
                                </rich:panelMenuItem>
                            </h:commandLink>
                            <h:commandLink action="#{WArchiwumArch.list}">
                                <rich:panelMenuItem >
                                    Archiwum
                                </rich:panelMenuItem>
                            </h:commandLink>
                            <h:commandLink action="#{DokumentyArch.list()}">
                                <rich:panelMenuItem >
                                    Dokumenty
                                </rich:panelMenuItem>
                            </h:commandLink>
                            <h:commandLink action="#{WyszukajArch.form}">
                                <rich:panelMenuItem >
                                    Wyszukaj w archiwum
                                </rich:panelMenuItem>
                            </h:commandLink>
                            <h:commandLink action="#{BrakowanieArch.list}">
                                <rich:panelMenuItem >
                                    Do brakowania
                                </rich:panelMenuItem>
                            </h:commandLink>
                        </rich:panelMenuGroup>

                        <rich:panelMenuGroup label="Ogłoszenia - zarządzanie" rendered="#{login.ogl}" expanded="#{login.menuOglExp}" actionListener="#{login.menuOglExpList}">
                            <h:commandLink action="#{OgloszeniaMg.list}">
                                <rich:panelMenuItem >
                                    Lista
                                </rich:panelMenuItem>
                            </h:commandLink>
                        </rich:panelMenuGroup>

                        <rich:panelMenuGroup label="Baza Zasobów Materiałowych" rendered="#{login.umSprz}" expanded="#{login.menuUmSprze}" actionListener="#{login.menuUmSprzExpList}">
                            <h:commandLink action="#{UrzadzeniaMg.list}">
                                <rich:panelMenuItem >
                                    Lista zasobów
                                </rich:panelMenuItem>
                            </h:commandLink>
                            <h:commandLink action="#{URejDokMg.list}">
                                <rich:panelMenuItem >
                                    Lista dokumentów
                                </rich:panelMenuItem>
                            </h:commandLink>
                        </rich:panelMenuGroup>

                        <rich:panelMenuGroup label="Baza Zasob. Mat. - konfiguracja" rendered="#{login.umCfg}" expanded="#{login.menuUmCfg}" actionListener="#{login.menuUmCfgExpList}">
                            <h:commandLink action="#{UMasterMg.list}">
                                <rich:panelMenuItem >
                                    Master Grupy
                                </rich:panelMenuItem>
                            </h:commandLink>
                            <h:commandLink action="#{UGrupaMg.list}">
                                <rich:panelMenuItem >
                                    Grupy
                                </rich:panelMenuItem>
                            </h:commandLink>
                            <h:commandLink action="#{UStruktMg.list}">
                                <rich:panelMenuItem >
                                    Drzewo
                                </rich:panelMenuItem>
                            </h:commandLink>
                        </rich:panelMenuGroup>

                        <rich:panelMenuGroup label="Struktura organizacyjna" rendered="#{login.struktura}" expanded="#{login.menuStrukturaExp}" actionListener="#{login.menuStrukturaExpList}">
                            <h:commandLink action="#{UsersM.nowy}">
                                <rich:panelMenuItem >
                                    Nowy pracownik
                                </rich:panelMenuItem>
                            </h:commandLink>

                            <h:commandLink action="#{UsersM.lista}" >
                                <rich:panelMenuItem>
                                    Lista pracowników
                                </rich:panelMenuItem>
                            </h:commandLink>

                            <h:commandLink action="#{StruktOsM.lista}" >
                                <rich:panelMenuItem>
                                    Struktura osobowa
                                </rich:panelMenuItem>
                            </h:commandLink>

                            <h:commandLink action="#{StruktDzialM.lista}" >
                                <rich:panelMenuItem>
                                    Struktura działów
                                </rich:panelMenuItem>
                            </h:commandLink>
                        </rich:panelMenuGroup>


                        <h:commandLink action="#{SpolkiMg.list}" rendered="#{login.admin}">
                            <rich:panelMenuItem>
                                Zarządzanie spółkami
                            </rich:panelMenuItem>
                        </h:commandLink>

                        <h:commandLink action="#{UsersM.ustawZastepce}"  rendered="#{login.kierownik}">
                            <rich:panelMenuItem>
                                Ustaw swojego zastępcę
                            </rich:panelMenuItem>
                        </h:commandLink>

                        <h:commandLink action="#{UrlopAll.list}" rendered="#{login.admin}">
                            <rich:panelMenuItem >
                                Lista wszystkich wniosków
                            </rich:panelMenuItem>
                        </h:commandLink>

                        <rich:panelMenuGroup label="Obsługa urlopów" rendered="#{login.urlop}" expanded="#{login.menuUrlopExp}" actionListener="#{login.menuUrlopExpList}">
                            <h:commandLink action="#{UrlopM.list}" >
                                <rich:panelMenuItem>
                                    Twoje wnioski
                                </rich:panelMenuItem>
                            </h:commandLink>

                            <h:commandLink action="#{UrlopM.listPodwl}" rendered="#{login.zalogowany.stKier or fn:length(login.zalogowany.userId.strukturaSec)>0}" >
                                <rich:panelMenuItem >
                                    Wnioski do akceptacji
                                </rich:panelMenuItem>
                            </h:commandLink>

                            <h:commandLink action="#{UrlopM.listPodwlHist}" rendered="#{login.zalogowany.stKier}">
                                <rich:panelMenuItem >
                                    Historia wniosków
                                </rich:panelMenuItem>
                            </h:commandLink>

                            <h:commandLink action="#{UrlopObceM.list}" rendered="#{login.zalogowany.przyjmowanieWnioskow}">    
                                <rich:panelMenuItem >
                                    Obce wnioski
                                </rich:panelMenuItem>
                            </h:commandLink>
                        </rich:panelMenuGroup>

                        <h:commandLink action="#{login.htmlZmianaHasla}" rendered="#{(login.zalogowany.userId.extId=='' or fn:contains(login.zalogowany.userId.extId, '@') or fn:contains(login.zalogowany.userId.extId, 'FN')) 
                                                 and login.zalogowany!=null}">
                            <rich:panelMenuItem >
                                Zmiana hasła
                            </rich:panelMenuItem>
                        </h:commandLink>
                        <rich:panelMenuItem>
                            <h:outputLink value="../logowanie/logout.jsp">
                                Wyjście
                            </h:outputLink>
                        </rich:panelMenuItem>
                        <rich:panelMenuItem>
                            Zalogowany jako: #{login.zalogowany.userId.fullname}, <br/>spółka: #{login.zalogowany.userId.spolkaId.nazwa}
                        </rich:panelMenuItem>
                        <rich:panelMenuItem rendered="#{fn:length(login.zalogowany.userId.wnLimity.ulimit)!=0}">
                            Dostępny urlop:<br/>
                            <strong>#{login.zalogowany.userId.wnLimity.ulimit}</strong>
                        </rich:panelMenuItem>
                    </rich:panelMenu>
                </td>
            </tr>
        </table>

        <h:panelGroup rendered="#{fn:length(login.menuLinki)>0}">
            <h4>do pobrania</h4>
            <ul>
                <ui:repeat value="#{login.menuLinki}" var="menuLinki">
                    <li><rich:panel>
                            <h:outputLink value="#{menuLinki.link}">
                                <h:outputText value="#{menuLinki.nazwa}"/>
                            </h:outputLink>
                            <rich:tooltip id="tt1" layout="block">
                                <h:outputText value="#{menuLinki.opis}"/>
                            </rich:tooltip>
                        </rich:panel>
                    </li>
                </ui:repeat>
            </ul>
        </h:panelGroup>
    </h:form>
</html>
