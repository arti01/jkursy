2014-09-11
Uwaga - zmiana projektu na teczki.
Powinna się stworzyć tabela dc_teczka. Potem trzeba do niej wkopiować rekordy z dc_projekt i wywalić dc_projekt.
Trzeba jeszcze zadbać o wywalenie kluczy obcych pomiędzy dc_dokument a dc_projekt
usunąc z dc_dokument pole projekt_id, ale wcześniej przekopiować wartosci do pola teczka_id

czyli coś takiego:
insert into dc_teczka select * from dc_projekt;
drop table dc_projekt cascade;--uwaga - cascade dziala na postgres
update dc_dokument set teczka_id=projekt_id;
ALTER TABLE dc_dokument DROP COLUMN projekt_id;
ALTER TABLE dc_dokument DROP COLUMN arch_data;
ALTER TABLE dc_dokument DROP COLUMN arch_osoba_zdajaca;
ALTER TABLE dc_dokument DROP COLUMN arch_osoba_odpowiadajaca;
ALTER TABLE dc_dokument DROP COLUMN arch_pokoj;
ALTER TABLE dc_dokument DROP COLUMN arch_regal;
ALTER TABLE dc_dokument DROP COLUMN arch_polka;
ALTER TABLE dc_dokument DROP COLUMN arch_karton;
ALTER TABLE dc_dokument DROP COLUMN arch_teczka;

2014-09-23

Wprowadzenie nowego statusu "w poczekalni":

insert into DC_DOKUMENT_STATUS values (99, 'archiwum - poczekalnia', 'dokument w poczekalni do archiwizacji', '#888888');
update DC_DOKUMENT set dokstatusid_id=99 where dokstatusid_id=6;
update DC_DOKUMENT_STATUS set id=7 where id=6;
update DC_DOKUMENT set dokstatusid_id=7 where dokstatusid_id=99;
update DC_DOKUMENT_STATUS set id=6 where id=99;

dodano dane słownikowe symbol mer 1 i symbol mer 2 - należy coś tam wpisać, pojawiają się potem przy definicji rodzaju

2014-09-26

--alter table DC_DOKUMENT_STATUS ADD COLUMN dla_tabeli varchar(50);
update DC_DOKUMENT_STATUS set dla_tabeli='dokumenty' where id<6;
update DC_DOKUMENT_STATUS set dla_tabeli='archiwum' where id>=6;


Opis przenoszenia do archiwum
Można dokument przenieść bezpośrednio, przenosząc dokument o statusie "zamknięty" do tabeli archiwalnej.
Przy tej operacji wszystkie dane z nim związane (historia akceptacji, pliki, do wiadomości) są przenoszone
do analogicznych tabel archiwalnych (z koncówką Arch), a dokument otrzymuje status "w archiwum".

Można też skorzystać z "poczekalni". Czyli wybrać dokumenty "zamknięte", przenieść do "poczekalni" a potem
je procesować, czyli wystawić dokument zdawczo - odbiorczy.

W Grupy Rodzaje trzeba stworzyć grupę z opcją "czy rodzaje mogą obsługiwać Dokumenty Archiwalne"
W rodzaje trzeba stworzyc rodzaj, ktory należy do ww grupy.
Wtedy pojawią się dwa pola - status poczatkowy i koncowy.
Pierwszy określa jakie dokumenty mogą zostać przypisane do ww rodzaju, drugi - jaki status uzyska
powiazany dokument po zakonczonym procesie akceptacji.
np - w poczekalnia -> w archiwum